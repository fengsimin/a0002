<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\x74\x72\141\163\x68"; parent::__construct(); } protected function postDelete($request_data) { goto hfRGo; m0jTK: foreach ($ids as $id) { goto y4pZZ; aGBoH: goto mW0UE; goto UNWaA; UNWaA: p6eje: goto H104e; H104e: if (!($path && count(explode("\57", $path)) >= 2)) { goto gS7h6; } goto ioDTI; Gfeaz: if ($this->db->delete($this->table, array("\151\x64", "\x3d", $id))->is()) { goto p6eje; } goto jgYcy; jgYcy: $error[] = $trash["\x74\x69\164\154\145"]; goto aGBoH; y4pZZ: $trash = $this->db->select($this->table)->where(array("\x69\x64", "\75", $id))->get(); goto mblNs; XZKfK: mW0UE: goto z2w3O; ioDTI: $this->_rmdir("\x2e\56\57" . $path); goto jfQGk; mblNs: $path = $trash["\160\141\x74\x68"]; goto Gfeaz; z2w3O: PpT1l: goto Pze2N; jfQGk: gS7h6: goto XZKfK; Pze2N: } goto HoPdC; cCw7p: $this->_log("\144\x65\x6c\145\164\145", array("\164\151\x74\x6c\145" => count($ids))); goto amFJ2; HoPdC: wpfCt: goto Dddhi; amFJ2: return $this->success(); goto DZj4q; hfRGo: $error = array(); goto XXulv; V6WEF: $this->db->commit(); goto cCw7p; DZj4q: rp_Rj: goto R2wOW; Lkqr3: $this->db->rollBack(); goto OQJsH; Dddhi: if (count($error) === 0) { goto q7cOz; } goto Lkqr3; D5s2_: q7cOz: goto V6WEF; XXulv: $ids = $request_data["\x69\144"]; goto RyTvZ; KhIme: goto rp_Rj; goto D5s2_; RyTvZ: $this->db->beginTransaction(); goto m0jTK; OQJsH: return $this->error(); goto KhIme; R2wOW: } protected function postReplay($request_data) { goto edK4R; XdAUQ: $this->db->commit(); goto SepMa; xJdIF: return $this->error(); goto o_ZcJ; J2fOH: ZbH0U: goto XdAUQ; SOiCk: return $this->success(); goto qvfme; edK4R: $error = array(); goto Ae118; Xqt90: foreach ($ids as $id) { goto B9o2p; t1m2i: $error[] = $trash["\164\151\x74\x6c\145"]; goto cyMlC; SV2fd: sRizL: goto t1m2i; ZOdTu: $table = $trash["\x74\141\x62\154\145"]; goto IXo2i; Sw2OW: $this->db->delete($this->table, array("\151\144", "\x3d", $id)); goto RPKS0; RPKS0: goto CNTiJ; goto SV2fd; xoiT0: if ($isadd === false) { goto sRizL; } goto Sw2OW; B9o2p: $trash = $this->db->select($this->table)->where(array("\151\x64", "\75", $id))->get(); goto ZOdTu; IXo2i: $isadd = $this->db->insert($table, json_decode($trash["\x64\141\164\x61"], true)); goto xoiT0; cyMlC: CNTiJ: goto Cm8fW; Cm8fW: yfh_2: goto g87jH; g87jH: } goto AEf92; AEf92: cL0pN: goto dTa2b; qvfme: FHF2Q: goto J_fhy; yuZme: $this->db->rollBack(); goto xJdIF; Ae118: $ids = $request_data["\x69\144"]; goto woj5D; o_ZcJ: goto FHF2Q; goto J2fOH; dTa2b: if (count($error) === 0) { goto ZbH0U; } goto yuZme; SepMa: $this->_log("\x72\145\x70\x6c\171", array("\164\x69\164\x6c\145" => count($ids))); goto SOiCk; woj5D: $this->db->beginTransaction(); goto Xqt90; J_fhy: } }
