<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\163\x69\164\x65"; parent::__construct(); } protected function getData() { goto L4V95; L4V95: $data = $this->db->select($this->table)->all(); goto JQNq4; TPvfA: fqCzQ: goto G_wu1; Ys0VD: foreach ($data as $d) { goto Q_uRc; ApFeS: if (!($value != '')) { goto vFxuG; } goto i3O1D; i3O1D: $site[$d["\156\141\x6d\x65"]] = $value; goto Nc_12; Nc_12: vFxuG: goto U8DMx; Q_uRc: $value = $d["\166\x61\154\165\145"]; goto ApFeS; U8DMx: G2yGf: goto gOuHn; gOuHn: } goto TPvfA; G_wu1: return $this->success($site); goto WkF8q; JQNq4: $site = array(); goto Ys0VD; WkF8q: } protected function postSave($request_data) { goto aIpSF; n7LD2: $error = array(); goto pVABu; chT2Y: unset($request_data["\164\x6f\153\x65\x6e"], $request_data["\x61\x64\x6d\151\156"], $request_data["\x5f\x72\145\x6d\x6f\166\x65\x66\151\154\x65\x73"]); goto n7LD2; Z37of: if (count($error) === 0) { goto VoHnY; } goto DcaRB; FSNVe: VoHnY: goto Xie4E; v84ED: goto ur7RL; goto FSNVe; b5KXi: foreach ($request_data as $name => $value) { goto T8Vpl; XhLRQ: g7Yvj: goto yAOGE; esem2: sVfCH: goto N41t0; IktmP: if (!($this->db->update($this->table, array("\x76\141\154\x75\145" => $value), array("\x6e\x61\x6d\145", "\x3d", $name))->is() === false)) { goto g7Yvj; } goto qMOCn; yAOGE: goto sVfCH; goto l5I_S; XgJcw: $value = $this->_encode($value); goto bqZ2D; K0b0R: M13wR: goto esem2; IHehT: $error[] = $name; goto K0b0R; bqZ2D: if ($count <= 0) { goto MUmyS; } goto IktmP; qMOCn: $error[] = $name; goto XhLRQ; pBt4f: if (!($this->db->insert($this->table, array("\x6e\141\155\x65" => $name, "\166\x61\x6c\165\145" => $value))->is() === false)) { goto M13wR; } goto IHehT; T8Vpl: $count = $this->db->select($this->table)->where(array("\156\x61\155\x65", "\x3d", $name))->count(); goto XgJcw; N41t0: Va7JO: goto qVFpk; l5I_S: MUmyS: goto pBt4f; qVFpk: } goto IdIyo; Xie4E: $this->db->commit(); goto qoBiN; VCwho: return $this->error("\345\xb7\262\344\277\235\xe5\xad\230\xe5\xa4\xb1\xe8\264\245\xef\xbc\201"); goto v84ED; IdIyo: Mxq0E: goto Z37of; pVABu: $this->db->beginTransaction(); goto b5KXi; DcaRB: $this->db->rollBack(); goto VCwho; n6_hR: return $this->success("\xe5\xb7\262\xe4\xbf\x9d\xe5\xad\x98\346\233\xb4\346\x94\xb9\xef\274\x81"); goto AkUfJ; qoBiN: $this->_log("\165\x70\x64\141\x74\x65", array("\x74\x69\164\x6c\145" => "\xe7\xbd\221\xe7\253\x99\350\xae\276\347\xbd\xae")); goto n6_hR; AkUfJ: ur7RL: goto VGJNF; aIpSF: $this->_removeFiles2($request_data["\x5f\x72\145\155\x6f\166\145\x66\x69\x6c\145\163"]); goto chT2Y; VGJNF: } protected function postSkin($request_data) { goto STLm3; v9eo2: $skins = explode("\x2d", $request_data["\164\x68\x65\x6d\x65\55\163\153\151\x6e"]); goto gUGCj; EBsLG: If2Q3: goto OJ5PU; sDkQ5: if (!isset($request_data["\x74\x68\x65\x6d\x65\x2d\163\x6b\x69\156"])) { goto k1Exw; } goto v9eo2; GXEWf: unset($request_data["\x74\x6f\x6b\x65\156"], $request_data["\141\x64\155\x69\x6e"], $request_data["\163\x74\x79\154\x65\55\143\x6f\144\x65"]); goto sDkQ5; aMWdz: niDeR: goto GXEWf; cR4TS: $request_data["\x73\153\151\156"] = $skins[1]; goto XWurP; STLm3: if (!isset($request_data["\163\164\x79\x6c\145\x2d\x63\x6f\144\145"])) { goto niDeR; } goto jDj9s; OJ5PU: return $this->success("\345\xb7\262\xe4\277\235\xe5\255\230\346\233\264\346\224\271\xef\274\x81"); goto ydbsf; LuE9y: file_put_contents($filename, $request_data["\163\164\x79\x6c\145\x2d\x63\157\144\145"]); goto v6RSZ; v6RSZ: chmod($filename, 420); goto aMWdz; XWurP: k1Exw: goto INaDm; gUGCj: $request_data["\x74\150\145\x6d\x65"] = $skins[0]; goto cR4TS; jDj9s: $filename = "\56\56\57\141\163\x73\145\x74\x2f\x63\163\x73\57\163\x74\171\154\145\x2e\143\163\163"; goto LuE9y; INaDm: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\156\x61\x6d\x65" => $name, "\166\141\154\165\x65" => $value), array("\156\141\155\x65", "\x3d", $name)); o0NzB: } goto EBsLG; ydbsf: } protected function getStyleCode() { $code = file_get_contents("\56\x2e\57\141\x73\x73\145\164\57\143\163\163\x2f\x73\164\171\x6c\145\56\143\163\x73"); return $this->success(array($code)); } }
