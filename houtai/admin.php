<?php
//Copyright (c) 2016 iFeiwu.com
 class Admin extends Item { function __construct() { $this->table = "\141\x64\155\x69\x6e"; parent::__construct(); } public function postLogin($request_data) { goto RKvyH; L338X: if ($hasher->CheckPassword($pass, $admin["\x70\x61\163\163"])) { goto gAsw7; } goto Npz5Z; YiriH: $admin["\162\x75\x6e\x74\151\155\145"] = $this->_runtime(); goto HCBgZ; l0ICP: gAsw7: goto OmJXT; OmJXT: $json = json_decode($admin["\x6a\163\x6f\x6e"], true); goto INkJt; INkJt: $json["\x6c\157\x67\x69\x6e\137\164\x69\x6d\x65"] = date("\131\x2d\155\55\144\40\x48\72\151"); goto tGgog; O6Mi6: $this->db->update($this->table, array("\x6a\163\157\x6e" => json_encode($json)), array("\151\x64", "\x3d", $admin["\x69\144"])); goto YiriH; HdQaC: if ($admin) { goto tal4c; } goto Aj7nv; u_ELV: return $this->success($admin); goto QpuBM; DqSEJ: $json["\x6c\x6f\x67\x69\156\137\143\x6f\165\x6e\x74"] = $json["\154\x6f\x67\x69\x6e\137\143\157\165\x6e\164"] + 1; goto O6Mi6; J0TEU: tal4c: goto vUktD; HCBgZ: $this->_log("\x6c\157\x67\151\156", array("\141\x64\x6d\151\x6e\137\151\x64" => $admin["\x69\144"], "\x61\144\155\x69\156\x5f\x6e\x61\155\145" => $admin["\156\x61\x6d\x65"])); goto u_ELV; tGgog: $json["\x6c\157\147\x69\156\x5f\151\x70"] = $this->_getIP(); goto DqSEJ; RKvyH: $name = $request_data["\156\141\x6d\145"]; goto U5b2Y; Aj7nv: return $this->error("\347\224\250\346\210\xb7\345\220\x8d\346\x88\226\xe5\xaf\x86\xe7\xa0\201\xe4\270\215\346\255\243\xe7\241\xae\xef\xbc\201"); goto J0TEU; Npz5Z: return $this->error("\347\x94\250\346\x88\xb7\345\x90\215\xe6\x88\x96\345\257\206\347\xa0\x81\xe4\270\215\346\255\243\xe7\241\xae\xef\274\201"); goto l0ICP; vUktD: ifeiwu\Loader::import("\145\x78\164\x65\156\144\57\120\x61\163\x73\x77\x6f\162\144\110\141\x73\x68"); goto gCtNp; U5b2Y: $pass = $request_data["\160\x61\163\163"]; goto lyfjd; lyfjd: $admin = $this->db->select($this->table)->where("\x73\164\141\164\145\x20\75\40\x31\40\101\x4e\104\40\156\141\x6d\x65\40\x3d\x20\77", array($name))->get(); goto HdQaC; gCtNp: $hasher = new PasswordHash(8, false); goto L338X; QpuBM: } protected function postPassword($id, $request_data) { goto fRo4n; LuRu6: IDY0j: goto BF7qe; fRo4n: $admin = $this->db->select($this->table)->where("\163\x74\141\x74\145\40\75\x20\61\x20\101\x4e\104\x20\151\144\x20\x3d\40\x3f", array($id))->get(); goto wUS97; Q_0xY: return $this->error("\350\257\xb7\xe7\xa8\x8d\345\200\231\345\206\x8d\350\257\x95\56\56\x2e"); goto HXE3d; KbLfg: $json["\x70\x61\163\x73\137\x74\151\x6d\x65"] = time(); goto HvhGn; ylout: $pass = $request_data["\160\x61\163\x73"]; goto LEi_a; T3Mg7: NQShB: goto yR3Cg; hl3NY: $hasher = new PasswordHash(8, false); goto N_2gH; y3sWZ: return $this->error("\346\x97\xa7\xe5\257\206\347\xa0\201\344\xb8\215\346\xad\xa3\347\xa1\256\357\xbc\201"); goto LuRu6; HvhGn: $data = array("\x70\x61\x73\x73" => $hasher->HashPassword($pass), "\152\x73\157\x6e" => json_encode($json)); goto tHu6J; LEi_a: ifeiwu\Loader::extend("\x50\x61\x73\x73\167\157\x72\x64\110\x61\163\x68"); goto hl3NY; BF7qe: $json = json_decode($admin["\x6a\163\x6f\156"], true); goto KbLfg; wUS97: $old_pass = $request_data["\157\154\144\160\x61\163\163"]; goto ylout; HXE3d: goto NQShB; goto QqEt5; QqEt5: d9t_r: goto y61qP; y61qP: return $this->success("\xe8\257\267\344\275\xbf\xe7\x94\250\xe6\x96\xb0\345\xaf\x86\347\xa0\201\xe9\207\x8d\xe6\x96\xb0\347\x99\273\345\275\225\357\xbc\201"); goto T3Mg7; N_2gH: if ($hasher->CheckPassword($old_pass, $admin["\160\x61\x73\163"])) { goto IDY0j; } goto y3sWZ; tHu6J: if ($this->db->update($this->table, $data, array("\x69\x64", "\x3d", $id))->is()) { goto d9t_r; } goto Q_0xY; yR3Cg: } protected function postPassword2($request_data) { goto jCrZ6; jCrZ6: $pass = $request_data["\160\x61\163\x73"]; goto CGvl_; ZhAQi: Qrrg2: goto gR5xT; gR5xT: return $this->success(); goto sZ5Cq; CGvl_: ifeiwu\Loader::extend("\x50\x61\x73\x73\167\157\162\144\x48\141\x73\x68"); goto BAYM6; QaCrl: return $this->error("\xe9\224\x99\xe8\257\xaf\xef\274\x8c\350\257\xb7\347\xa8\215\345\x80\x99\xe5\x86\x8d\350\257\x95\x2e\56\x2e"); goto oj1db; Ohao4: if ($this->db->update($this->table, array("\x70\x61\x73\x73" => $hasher->HashPassword($pass)), "\x69\x64\x20\75\x20\61")->is()) { goto Qrrg2; } goto QaCrl; sZ5Cq: pI05j: goto AoWmf; BAYM6: $hasher = new PasswordHash(8, false); goto Ohao4; oj1db: goto pI05j; goto ZhAQi; AoWmf: } protected function postAdd($request_data) { goto wT_ZT; Tlwau: wUg4D: goto TfG8g; uOc3X: goto wUg4D; goto BCuOv; G0KQO: $data["\x73\x74\141\x74\x65"] = $request_data["\163\x74\x61\164\145"] ?: 0; goto dFkxO; dFkxO: $data["\162\142\x61\x63"] = $request_data["\x72\x62\x61\x63"] ?: "\x6e\x6f\x72\x6d\141\x6c"; goto zJbEt; aGk3v: if ($this->db->insert($this->table, $data)->is()) { goto iM63a; } goto TzV1_; F_7wH: $this->_log("\x61\144\x64", array("\164\x69\x74\x6c\x65" => $data["\156\141\x6d\x65"])); goto w8cOQ; TzV1_: return $this->error("\345\270\220\345\217\xb7\xe5\xb7\262\xe5\xad\x98\345\234\xa8\xef\274\x81"); goto uOc3X; w8cOQ: return $this->success(); goto Tlwau; wT_ZT: ifeiwu\Loader::import("\145\170\x74\145\156\144\57\x50\141\x73\163\x77\x6f\x72\144\x48\141\163\x68"); goto Fa2YL; IiGmL: $data["\160\x61\x73\x73"] = $hasher->HashPassword($request_data["\160\141\163\x73"]); goto G0KQO; QxHRU: $data["\x6e\141\155\x65"] = $request_data["\156\141\155\145"]; goto IiGmL; BCuOv: iM63a: goto F_7wH; Fa2YL: $hasher = new PasswordHash(8, false); goto QxHRU; zJbEt: $data["\152\x73\x6f\156"] = json_encode(array("\x6c\x61\163\x74\x5f\x74\x69\155\145" => "\x2d\x2d\x2d\55\x2d", "\154\x61\x73\164\x5f\x69\160" => "\x30\x2e\60\56\60\x2e\60", "\154\x6f\147\x69\x6e\x5f\x63\157\165\x6e\164" => 0)); goto YjM1N; YjM1N: $data["\x63\x74\x69\155\145"] = time(); goto aGk3v; TfG8g: } protected function postUpdate($id, $request_data) { goto TfmIj; WESDa: $data["\156\x61\155\145"] = $request_data["\156\x61\x6d\x65"]; goto dWPjK; T1RiN: $data["\151\x6e\x74\x72\157"] = $request_data["\x69\156\164\x72\157"]; goto qtzJJ; FUb8m: $data["\165\164\151\x6d\x65"] = time(); goto x3oRy; qtzJJ: $data["\161\x71"] = $request_data["\161\161"]; goto dr1Zk; DElAA: $data["\x61\144\144\162\x65\x73\x73"] = $request_data["\x61\144\144\162\x65\163\x73"]; goto KoT3V; KbJPG: if (!isset($request_data["\x72\x62\141\143"])) { goto unljC; } goto njxs0; lWc4D: if (!isset($request_data["\163\x74\141\x74\x65"])) { goto FnZet; } goto buBtU; VB2AZ: TxG8g: goto Ninbl; x3oRy: if ($this->db->update($this->table, $data, array("\x69\x64", "\x3d", $id))->is()) { goto TxG8g; } goto EwPGK; Ninbl: $this->_log("\x75\160\144\141\x74\145", array("\164\x69\x74\x6c\145" => $data["\x6e\x61\x6d\145"])); goto bENVh; KoT3V: $data["\x6d\157\x62\x69\154\x65"] = $request_data["\155\x6f\142\151\x6c\x65"]; goto T1RiN; bENVh: return $this->success(); goto M3878; M3878: DLJEH: goto SrdJv; zURXx: unljC: goto BsfjM; KuV37: goto DLJEH; goto VB2AZ; dr1Zk: $data["\x73\x65\170"] = $request_data["\163\x65\170"]; goto FUb8m; eB31l: FnZet: goto KbJPG; dWPjK: GiXiz: goto lWc4D; EwPGK: return $this->error("\xe8\xaf\xb7\347\250\x8d\xe5\x80\231\345\x86\x8d\xe8\257\x95\x2e\56\x2e"); goto KuV37; TfmIj: ifeiwu\Loader::import("\145\170\164\x65\156\x64\57\x50\141\x73\x73\x77\x6f\x72\x64\110\141\163\150"); goto qY4fs; buBtU: $data["\163\x74\141\x74\x65"] = $request_data["\x73\x74\x61\164\145"]; goto eB31l; njxs0: $data["\x72\142\x61\143"] = $request_data["\162\142\141\x63"]; goto zURXx; BsfjM: if (!isset($request_data["\160\141\x73\163"])) { goto pXl3x; } goto ov27r; qY4fs: $hasher = new PasswordHash(8, false); goto h8t77; HJIzQ: pXl3x: goto mzsvp; mzsvp: $data["\x72\x65\x61\x6c\156\x61\155\x65"] = $request_data["\162\145\x61\x6c\156\141\x6d\145"]; goto DElAA; ov27r: $data["\x70\x61\x73\163"] = $hasher->HashPassword($request_data["\x70\141\x73\x73"]); goto HJIzQ; h8t77: if (!isset($request_data["\156\x61\155\145"])) { goto GiXiz; } goto WESDa; SrdJv: } protected function postDelete($request_data) { goto JK_AP; sDH9d: szBOg: goto UGAuU; jwCvW: foreach ($ids as $id) { $this->db->delete($this->table, array("\x69\144", "\75", $id)); qNDxB: } goto sDH9d; UGAuU: return $this->success(); goto w7GKZ; JK_AP: $ids = $request_data["\x69\x64"]; goto jwCvW; w7GKZ: } protected function postToken($request_data) { goto J4RZQ; EK0VL: rc8S1: goto rsU0u; K7aiG: if (!file_put_contents("\x74\157\153\145\156\x2e\x70\x68\x70", "\x3c\77\x70\x68\x70\x20\162\145\164\165\x72\156\40\x27{$token}\47\x3b")) { goto WbZo8; } goto byhdP; afcZ6: WbZo8: goto EK0VL; J4RZQ: if (!($token = $request_data["\164\x6f\153\145\156"])) { goto rc8S1; } goto K7aiG; byhdP: return $this->success(); goto afcZ6; rsU0u: return $this->error("\346\xb2\xa1\xe6\234\x89\xe6\x9d\x83\351\x99\220\xe6\x9b\xb4\346\x8d\xa2\xe5\257\206\351\222\245\357\274\x81"); goto iBG6v; iBG6v: } protected function postUpgrade($request_data) { goto Zhan0; qFRLZ: return $this->error("\xe6\x97\xa0\xe6\263\225\xe8\257\xbb\xe5\x8f\226\xe6\226\207\xe4\xbb\xb6\xef\xbc\x8c\350\xaf\xb7\xe8\x81\x94\xe7\xb3\xbb\xe9\xa3\x9e\345\261\213\xe5\256\242\xe6\x9c\215\343\x80\x82"); goto I5Hn0; SBvGd: unlink("\56\x2e\57\165\160\x64\141\x74\x65\56\x70\x68\160"); goto AxCmC; AxCmC: unlink("\x2e\x2e\57\144\141\x74\x61\x62\x61\163\145\x2e\x73\x71\154"); goto sodti; QrZ3g: $json = curl_exec($ch); goto yJxSB; jNJU1: curl_setopt($ch, CURLOPT_HEADER, 0); goto agtEE; BCwn4: $ch = curl_init(); goto FBRei; xu_jv: return $this->error("\xe6\227\xa0\346\263\225\xe5\x86\231\345\205\245\xe6\x96\x87\344\xbb\266\357\xbc\x8c\xe8\257\267\xe6\x8a\212\xe7\233\256\345\xbd\x95\xe8\xae\xbe\347\275\256\xe4\270\272\x30\x37\x37\x37\345\x8f\xaf\xe5\x86\x99\xe6\x9d\203\xe9\231\220\357\274\x81"); goto Mo2LU; fgtkX: unlink("\x2e\x2e\x2f\x75\x70\x67\162\141\144\145\x2e\160\150\x70"); goto SBvGd; I5Hn0: nTsdx: goto cKV1Y; UeXup: $json = json_decode($json, true); goto Dayyx; yJxSB: curl_close($ch); goto UeXup; Zhan0: $ctx = stream_context_create(array("\150\x74\x74\160" => array("\x74\151\155\145\x6f\x75\164" => 30))); goto GYD8b; GYD8b: $upgrade_code = file_get_contents("\150\x74\164\160\x3a\57\x2f\x69\x66\x65\151\x77\x75\56\143\x6f\x6d\x2f\147\145\x74\x2f\x75\x70\147\x72\141\144\x65\x3f\x74\x3d" . time(), 0, $ctx); goto MMr3s; cKV1Y: if (file_put_contents("\x2e\x2e\57\165\x70\147\162\141\144\x65\x2e\x70\x68\x70", $upgrade_code)) { goto PMeav; } goto xu_jv; BE1hc: return $this->error($json["\155\x65\x73\163\141\147\145"]); goto HpzCk; I235P: curl_setopt($ch, CURLOPT_POSTFIELDS, $curl_post); goto QrZ3g; sodti: return $this->success("\xe8\275\273\347\275\x91\xe7\253\x99\345\x8d\x87\347\xba\xa7\xe6\x88\x90\345\x8a\x9f\357\274\x81"); goto IOkWj; agtEE: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto rZpfc; rZpfc: curl_setopt($ch, CURLOPT_POST, 1); goto I235P; IoM5A: $curl_url = "\150\x74\x74\160\x3a\x2f\57" . $_SERVER["\x53\105\x52\126\105\x52\x5f\116\101\x4d\x45"] . implode("\x2f", array_slice(explode("\x2f", $_SERVER["\x53\x43\x52\x49\x50\124\137\116\101\115\105"]), 0, -2)); goto bz3bC; HpzCk: h3WPW: goto fgtkX; Dayyx: if (!($json["\143\157\144\145"] == 1)) { goto h3WPW; } goto BE1hc; FBRei: curl_setopt($ch, CURLOPT_URL, $curl_url . "\x2f\x75\160\x67\162\x61\x64\145\x2e\160\150\160"); goto jNJU1; MMr3s: if (!($upgrade_code === false)) { goto nTsdx; } goto qFRLZ; bz3bC: $curl_post = array("\166\x69\x65\167\137\147\x69\x74" => $request_data["\x76\x69\x65\x77\137\x67\x69\164"], "\166\151\x65\x77\x5f\156\141\155\145" => $request_data["\166\x69\x65\167\x5f\156\x61\x6d\145"], "\x76\x69\145\167\137\166\145\x72\x73\151\157\156" => $request_data["\166\151\145\x77\x5f\166\x65\162\x73\151\157\x6e"]); goto BCwn4; Mo2LU: PMeav: goto IoM5A; IOkWj: } protected function postPublish() { goto dDiiL; sMuH0: return $this->error(); goto ZJ0MS; Jr5En: u7M4k: goto akcTk; akcTk: return $this->success(); goto zcoFG; AxgTt: if (is_dir("\x2e\56\x2f\144\141\164\x61\57\x63\x61\x63\x68\x65\x2f")) { goto HtTka; } goto hHFpk; zcoFG: DkEnb: goto xU0yb; hHFpk: return $this->success(); goto d00pS; dDiiL: $this->_saveData("\x73\x69\x74\x65", array("\156\x61\x6d\145" => "\166\x65\162\163\151\x6f\x6e", "\x76\141\154\165\145" => time()), array("\156\x61\x6d\145", "\75", "\166\145\x72\163\x69\x6f\x6e")); goto AxgTt; d00pS: HtTka: goto zpwAj; zpwAj: if ($this->_rmdir("\56\56\x2f\x64\141\164\x61\57\143\x61\143\150\145\x2f") !== false) { goto u7M4k; } goto sMuH0; ZJ0MS: goto DkEnb; goto Jr5En; xU0yb: } protected function getFiles($dir, $ext) { goto D3b0m; keu9R: return $this->success($files); goto MM7_5; zixhy: NoY4D: goto gU0r5; MM7_5: BW2mz: goto rLqUb; NlxoE: $ext = $ext ? $ext : "\x2e\x70\x68\160"; goto Sf5ml; ZVSM1: if (!($file != "\x2e" && $file != "\56\x2e")) { goto aVsX9; } goto m4DK4; kFjgU: $files[] = array("\156\141\x6d\145" => $filename, "\x63\157\x6e\x74\145\156\x74" => $file_content); goto eX_Su; Rl026: if (!($ext == "\52" || strpos($filename, $ext))) { goto vUdaA; } goto sL56h; gU0r5: closedir($handle); goto keu9R; D3b0m: $dir = $dir ? $dir : "\x2e"; goto NlxoE; sL56h: $file_content = file_get_contents($filename); goto kFjgU; cj9W4: return $this->error($dir . "\346\227\xa0\346\xb3\225\346\211\x93\xe5\274\200\347\233\xae\xe5\xbd\225\357\xbc\201"); goto q8Opf; m4DK4: $filename = $dir . "\57" . $file; goto Rl026; gHSaL: if ($handle) { goto Rja9_; } goto cj9W4; Bfuts: qa629: goto RAZFz; Sf5ml: $handle = opendir($dir); goto gHSaL; F9fub: Rja9_: goto Bfuts; ItGAv: goto qa629; goto zixhy; q8Opf: goto BW2mz; goto F9fub; RAZFz: if (!(false !== ($file = readdir($handle)))) { goto NoY4D; } goto ZVSM1; eX_Su: vUdaA: goto HGY2U; HGY2U: aVsX9: goto ItGAv; rLqUb: } protected function getFileContent($filename) { goto pU2V2; FUWrQ: goto beQLo; goto Uq7OF; Wr83l: beQLo: goto nuixq; Uq7OF: V74bi: goto yjD2S; pU2V2: if (file_exists($filename)) { goto V74bi; } goto bpw87; bpw87: return $this->error($filename . "\x20\346\x96\207\xe4\273\266\xe4\xb8\215\345\xad\230\345\x9c\xa8\357\274\x81"); goto FUWrQ; LoERZ: return $this->success(array("\156\x61\155\145" => $filename, "\143\x6f\x6e\x74\x65\x6e\164" => $content)); goto Wr83l; yjD2S: $content = file_get_contents($filename); goto LoERZ; nuixq: } protected function getFileConfig($name) { goto o86PG; mMHdC: return include $filename; goto xL79m; xL79m: pqjIH: goto u6dQ1; lje9B: IAuaE: goto mMHdC; LrLuo: return $this->error($filename . "\40\346\226\207\344\xbb\xb6\xe4\xb8\x8d\345\xad\230\xe5\x9c\250\357\274\x81"); goto MheJa; GystZ: if (file_exists($filename)) { goto IAuaE; } goto LrLuo; MheJa: goto pqjIH; goto lje9B; o86PG: $filename = "\x2e\x2e\57\143\x6f\156\146\x69\x67\x2f" . $name . "\56\x70\x68\160"; goto GystZ; u6dQ1: } protected function postFileWrite($request_data) { goto QO62a; rOHd8: return $this->success(); goto SaVp_; c22GT: $content = $request_data["\x63\157\156\x74\x65\156\164"]; goto sPI_h; o_jtO: return $this->error(); goto LSkja; xmxIP: chmod($filename, 420); goto rOHd8; SaVp_: eh16b: goto opycG; nSlU6: uPnZv: goto FQ2OX; LSkja: goto eh16b; goto nSlU6; sPI_h: if ($filename && $content) { goto uPnZv; } goto o_jtO; QO62a: $filename = $request_data["\x66\151\154\x65\156\x61\155\x65"]; goto c22GT; FQ2OX: chmod($filename, 493); goto RYdlz; RYdlz: file_put_contents($filename, $content); goto xmxIP; opycG: } protected function getBackup() { goto hMw3j; dinje: return $this->error("\xe6\234\211\xe9\203\250\345\210\206\346\225\xb0\346\x8d\256\345\244\x87\xe4\273\275\xe5\244\xb1\xe8\264\xa5\357\xbc\201"); goto grlzM; lDHY9: if ($false_count > 0) { goto P4Zyt; } goto Vjrpi; cMy0l: $qiniu_backup_types = explode("\54", $qiniu_backup_type); goto zrK2e; oyUNG: P4Zyt: goto dinje; evYi1: wdxov: goto xt_sw; i_6IB: $config = ifeiwu\Config::get("\142\x61\x63\x6b\165\160"); goto cvsWt; tvm9f: $qiniu_backup_type = $config["\x71\151\x6e\x69\x75\137\142\x61\143\153\165\x70\137\x74\x79\160\x65"]; goto QbdcJ; gIZpg: $false_count = 0; goto KjgMk; Sx4IF: if (!$smtp_backup_type) { goto fvn2J; } goto bto0D; QbdcJ: if (!$qiniu_backup_type) { goto D7iBQ; } goto cMy0l; Reb3T: foreach ($smtp_backup_types as $type) { goto lpg68; X1Ql2: if ($this->_backupEmail($config)) { goto jVIdy; } goto pSDOf; DCIUh: vR44y: goto pToVI; lpg68: $config["\142\141\x63\153\x75\160\137\164\171\160\x65"] = $type; goto SS2qK; QFdmB: jVIdy: goto OUm3B; pSDOf: $false_count++; goto QFdmB; OUm3B: @unlink("\164\145\155\x70\x2f" . $config["\142\141\x63\x6b\165\160\137\156\x61\155\145"]); goto DCIUh; SS2qK: $config["\x62\141\x63\x6b\165\160\137\x6e\x61\155\x65"] = $this->_getPackedFileName($type); goto X1Ql2; pToVI: } goto evYi1; cvsWt: $smtp_backup_type = $config["\163\155\164\x70\137\x62\x61\143\x6b\165\x70\x5f\x74\171\x70\145"]; goto gIZpg; TFDYT: goto mISCo; goto oyUNG; xt_sw: fvn2J: goto tvm9f; grlzM: mISCo: goto HdcZ7; Vjrpi: return $this->success(); goto TFDYT; s21Ev: VDlct: goto lXXA5; zrK2e: foreach ($qiniu_backup_types as $type) { goto pJipA; mCgg9: @unlink("\164\145\x6d\x70\57" . $config["\142\x61\143\x6b\x75\160\137\x6e\141\155\x65"]); goto r8pPx; pJipA: $config["\x62\x61\x63\153\x75\x70\137\164\171\160\145"] = $type; goto U7s1s; U7s1s: $config["\142\141\143\x6b\x75\x70\137\x6e\x61\155\145"] = $this->_getPackedFileName($type); goto pVFlY; n0YFQ: Aqg6h: goto mCgg9; pVFlY: if ($this->_backupQiniu($config)) { goto Aqg6h; } goto isOaa; isOaa: $false_count++; goto n0YFQ; r8pPx: bTeyK: goto c3pLv; c3pLv: } goto s21Ev; hMw3j: set_time_limit(0); goto i_6IB; bto0D: $smtp_backup_types = explode("\x2c", $smtp_backup_type); goto Reb3T; lXXA5: D7iBQ: goto lDHY9; KjgMk: $this->_mkdir("\164\145\155\160\57"); goto Sx4IF; HdcZ7: } private function _getPackedFileName($type) { goto EAhlI; GOPF4: $sql_name = $name . "\56\x73\x71\x6c"; goto h5piA; fddWb: JJ7iD: goto GzYiX; XVXy8: $bool = $archive->create($sql_name); goto mYS5J; TW1Pn: if ($bool) { goto JJ7iD; } goto itbmW; itbmW: return ''; goto kJO09; d03bO: if ($type == "\144\x62") { goto UEcEB; } goto KDGsO; RvoQB: $name = date("\x59\155\144\x48\151\163") . "\x5f" . $type; goto L5izM; EAhlI: ifeiwu\Loader::import("\145\x78\164\x65\x6e\x64\57\x50\143\154\x5a\x69\160"); goto RvoQB; F6wEo: $archive = new PclZip($zip_path); goto dI1u8; fP_Od: $mb = new MysqlBackup(ifeiwu\Config::get("\x64\141\164\141\142\141\x73\x65")); goto F1hRL; Iz03c: YzbMy: goto O_nUp; wFAte: EaH_n: goto F6wEo; L5izM: $zip_name = $name . "\x2e\164\141\162\x2e\147\172"; goto jgcyQ; Kuvyw: KkaRx: goto TW1Pn; c8QGk: if ($type == "\143\157\x64\x65") { goto YzbMy; } goto o1XU8; jgcyQ: $zip_path = "\x74\145\x6d\x70\x2f" . $zip_name; goto d03bO; dEzw0: $archive = new PclZip($zip_path); goto XVXy8; b3x42: $bool = $archive->create("\x2e\56\57\141\x73\x73\145\164\54\x2e\x2e\x2f\143\x6f\156\x74\162\157\x6c\154\145\162\x2c\56\x2e\57\143\157\x6e\x66\151\x67\x2c\x2e\56\57\x69\x66\145\151\167\165\54\56\x2e\57\166\x69\x65\167\x2c\x2e\56\57\x63\157\155\x6d\x6f\156\56\160\x68\160\54\56\56\57\x69\x6e\x64\x65\x78\56\x70\150\160\x2c\x2e\x2e\x2f\56\150\164\141\x63\x63\145\163\x73\x2c\x2e\x2e\57\156\x67\151\x6e\170\x2e\143\x6f\156\146", PCLZIP_OPT_REMOVE_PATH, "\56\56\57"); goto Kuvyw; F1hRL: $mb->setPath(__DIR__); goto TSolP; dI1u8: $bool = $archive->create("\x2e\56\57\144\x61\x74\141", PCLZIP_OPT_REMOVE_PATH, "\x2e\x2e\57"); goto ntdOG; TSolP: $mb->setName($sql_name); goto VrURZ; KDGsO: if ($type == "\x64\x61\x74\x61") { goto EaH_n; } goto c8QGk; o1XU8: goto KkaRx; goto se10e; TvjjW: dhCkB: goto r71K_; W6Sdh: if (!$bool) { goto dhCkB; } goto dEzw0; h5piA: ifeiwu\Loader::import("\x65\x78\164\x65\x6e\144\x2f\115\x79\163\161\154\x42\141\x63\x6b\165\160"); goto fP_Od; GzYiX: return $zip_name; goto VU6sK; mYS5J: @unlink($sql_name); goto TvjjW; VrURZ: $bool = $mb->export(); goto W6Sdh; O_nUp: $archive = new PclZip($zip_path); goto b3x42; se10e: UEcEB: goto GOPF4; VU6sK: GAXeQ: goto b0gFV; r71K_: goto KkaRx; goto wFAte; kJO09: goto GAXeQ; goto fddWb; ntdOG: goto KkaRx; goto Iz03c; b0gFV: } private function _backupQiniu($config) { goto i7yfR; kSE_b: return false; goto X4W0n; pzGYX: list($ret, $err) = $uploadMgr->putFile($token, $key, $filename); goto iP7V6; LFuFE: $this->_debug($err); goto kSE_b; iP7V6: if ($err !== null) { goto q7I7P; } goto XfyTY; bWD0n: $secretKey = $config["\161\x69\x6e\151\165\137\x73\x65\143\x72\145\164\x5f\153\x65\x79"]; goto AzZcU; cRKa9: goto fOAXu; goto g71jD; DQFha: $token = $auth->uploadToken($bucket); goto x1ovb; g71jD: q7I7P: goto LFuFE; AzZcU: $auth = new \Qiniu\Auth($accessKey, $secretKey); goto ruODh; i7yfR: require_once VEN_PATH . "\121\x69\156\x69\x75\x2f\146\x75\156\x63\164\x69\x6f\156\x73\56\160\x68\160"; goto WrRto; WrRto: $accessKey = $config["\161\151\156\x69\x75\x5f\141\x63\x63\x65\163\x73\x5f\x6b\x65\171"]; goto bWD0n; Ml3Kc: $uploadMgr = new \Qiniu\Storage\UploadManager(); goto pzGYX; x4VII: $key = $config["\x62\141\x63\x6b\x75\x70\x5f\156\141\155\145"]; goto Ml3Kc; X4W0n: fOAXu: goto XrGHL; x1ovb: $filename = __DIR__ . "\x2f\x74\145\x6d\160\57" . $config["\142\141\x63\x6b\x75\x70\x5f\156\141\155\x65"]; goto x4VII; XfyTY: return true; goto cRKa9; ruODh: $bucket = $config["\x71\151\x6e\x69\x75\x5f\x62\x75\143\x6b\x65\164\137\156\141\x6d\145"]; goto DQFha; XrGHL: } private function _backupEmail($config) { goto FhTMp; DGKND: $mailer->setContent(date("\131\xe5\271\xb4\155\346\234\x88\x64\xe6\227\xa5\40\x48\xe6\x97\xb6\x69\xe5\x88\x86\x73\xe7\xa7\x92") . "\x20\345\xa4\207\xe4\273\xbd\346\x88\x90\345\x8a\237\xef\274\x81", false); goto Ntkh8; iVdBB: return false; goto HGXh_; JYR5R: goto oUsbB; goto fWloy; IY0er: $mailer->addAttachment($filename); goto JYR5R; Y3ueq: if ($backup_type == "\144\x61\164\x61") { goto k2EZK; } goto gDEic; U1nkJ: MZQ2f: goto GyRpD; v3j5c: if ($backup_type == "\x64\142") { goto ZMzeE; } goto Y3ueq; KevY5: R7VY2: goto F_7PW; C18q6: $mailer->setContent(date("\131\xe5\271\264\x6d\xe6\x9c\x88\x64\xe6\x97\xa5\40\110\xe6\227\266\151\345\x88\x86\x73\xe7\247\222") . "\x20\345\244\207\344\273\xbd\xe6\210\x90\xe5\212\237\357\xbc\201", false); goto nDUDQ; G0fgw: return true; goto jj0fu; icEAw: hnPZX: goto kFifh; Zgv4j: if ($mailer->send()) { goto j1aaq; } goto pOYk_; FhTMp: ini_set("\155\x65\155\x6f\162\171\x5f\x6c\x69\155\x69\164", -1); goto Hd715; F_7PW: return true; goto U1nkJ; k9XbP: $mailer->setContent(date("\x59\345\271\264\x6d\346\234\x88\x64\xe6\227\xa5\x20\110\xe6\x97\xb6\151\xe5\210\x86\x73\xe7\xa7\222") . "\40\345\244\x87\xe4\273\275\xe5\xa4\261\350\xb4\245\xef\xbc\x81", false); goto jY7m3; ps1ku: ZMzeE: goto U6YIR; FWG4Q: $mailer->setContent(date("\131\xe5\271\264\155\xe6\x9c\210\x64\346\x97\245\40\110\346\227\xb6\x69\345\210\206\x73\xe7\247\222") . "\x20\345\xa4\207\xe4\273\xbd\xe6\x88\220\xe5\212\x9f\357\274\x81", false); goto IY0er; gDEic: if ($backup_type == "\x63\x6f\x64\x65") { goto iIJ1x; } goto g3gAG; Y_baT: $backup_type = $config["\x62\141\x63\153\x75\x70\x5f\x74\x79\160\145"]; goto Y3SOV; fWloy: gWKuf: goto S1EBl; KoZ2y: if ($mailer->send()) { goto R7VY2; } goto nn4Qc; jj0fu: dl1Bl: goto laVwl; LrWxz: return true; goto zul20; jYaDz: if (!$config["\x62\141\x63\153\x75\x70\x5f\156\x61\x6d\145"]) { goto gWKuf; } goto FWG4Q; S1EBl: $mailer->setContent(date("\131\345\271\xb4\x6d\xe6\x9c\210\144\346\x97\xa5\40\x48\346\227\266\x69\xe5\x88\206\x73\347\247\x92") . "\40\345\xa4\x87\xe4\273\275\xe5\xa4\261\350\264\245\xef\xbc\201", false); goto RMu6f; glnp9: j1aaq: goto G0fgw; eR6bY: goto DaeB0; goto DbiAo; pOYk_: $this->_debug($mailer->ErrorInfo); goto cqaUk; GyRpD: goto ydsSC; goto mp00F; nKaq_: $filename = __DIR__ . "\x2f\x74\145\x6d\160\57" . $config["\x62\141\x63\153\165\x70\x5f\156\141\155\145"]; goto v3j5c; S_Rro: goto MZQ2f; goto KevY5; UhrJ1: $this->_debug($mailer->ErrorInfo); goto iVdBB; lgkQR: $mailer->setTitle("\xe7\xbd\221\347\xab\231\x5b\350\265\204\346\xba\220\xe5\272\223\x5d\xe5\xa4\207\xe4\xbb\275"); goto jYaDz; j292I: $mailer->setContent(date("\131\xe5\xb9\xb4\x6d\346\234\210\144\xe6\x97\xa5\40\x48\xe6\x97\xb6\151\xe5\x88\x86\x73\347\xa7\x92") . "\40\345\244\207\344\xbb\275\345\xa4\261\xe8\xb4\245\357\274\201", false); goto icEAw; g3gAG: goto ydsSC; goto ps1ku; DbiAo: RXVla: goto k9XbP; ZRI2x: HxSAN: goto LrWxz; Ulc4b: $mailer->setTitle("\347\xbd\x91\347\253\x99\x5b\xe4\xb8\273\347\xa8\213\345\xba\x8f\135\345\244\x87\xe4\xbb\xbd"); goto QLJ2q; U6YIR: $mailer->setTitle("\347\275\x91\xe7\253\231\133\346\x95\xb0\346\215\256\xe5\272\x93\x5d\345\xa4\207\xe4\xbb\275"); goto JXk4v; zul20: iwRy9: goto ay2cT; mp00F: iIJ1x: goto Ulc4b; pVXc4: k2EZK: goto lgkQR; aIgtY: goto hnPZX; goto lQoTU; JXk4v: if (!$config["\x62\x61\x63\153\x75\x70\137\x6e\x61\155\145"]) { goto RXVla; } goto C18q6; nAD3w: $mailer->addAddress($config["\x73\155\164\x70\x5f\x61\144\x64\x72\145\x73\x73"]); goto Y_baT; RMu6f: oUsbB: goto KoZ2y; Ntkh8: $mailer->addAttachment($filename); goto aIgtY; o1BBm: return false; goto S_Rro; nn4Qc: $this->_debug($mailer->ErrorInfo); goto o1BBm; R54XS: goto dl1Bl; goto glnp9; ay2cT: ydsSC: goto y_cmX; Y3SOV: $backup_name = $config["\x62\141\x63\153\165\160\x5f\156\141\155\145"]; goto nKaq_; kFifh: if ($mailer->send()) { goto HxSAN; } goto UhrJ1; Hd715: ifeiwu\Loader::import("\145\170\x74\145\x6e\x64\57\x4d\x61\x69\154\x65\x72"); goto lsv0x; lsv0x: $mailer = new Mailer(array("\163\x6d\164\160\137\144\x65\x62\165\x67" => 0, "\163\155\x74\x70\137\141\165\164\x68" => true, "\x73\x6d\164\x70\137\150\157\x73\x74" => $config["\x73\155\164\x70\x5f\x68\157\163\164"], "\163\x6d\x74\160\137\160\x6f\162\x74" => $config["\163\155\x74\160\137\160\157\x72\164"], "\x73\155\x74\x70\137\x73\x73\154" => $config["\x73\x6d\164\160\137\x73\163\x6c"], "\x73\x6d\164\x70\x5f\165\x73\145\x72" => $config["\x73\x6d\164\160\137\x75\x73\x65\x72"], "\163\x6d\164\160\x5f\160\141\163\163" => $config["\x73\155\x74\x70\x5f\x70\x61\163\x73"], "\163\155\x74\160\137\146\x72\x6f\155\137\x65\155\141\x69\154" => $config["\163\x6d\164\160\137\146\162\x6f\x6d\137\145\x6d\141\x69\154"], "\x73\x6d\x74\160\x5f\146\x72\x6f\155\137\156\x61\155\x65" => $config["\163\x6d\164\160\137\146\x72\157\155\137\156\x61\155\x65"])); goto nAD3w; lQoTU: fi3AW: goto j292I; QLJ2q: if (!$config["\142\141\x63\x6b\x75\x70\137\156\141\x6d\145"]) { goto fi3AW; } goto DGKND; cqaUk: return false; goto R54XS; nDUDQ: $mailer->addAttachment($filename); goto eR6bY; HGXh_: goto iwRy9; goto ZRI2x; jY7m3: DaeB0: goto Zgv4j; laVwl: goto ydsSC; goto pVXc4; y_cmX: } private function _runtime() { goto ymXKD; Qf19Y: $env["\163\171\163\x74\145\155"] = php_uname("\163") . "\40" . php_uname("\162"); goto CuvR3; ymXKD: $env = array(); goto Qf19Y; N2Los: return $env; goto JV0EX; lb48F: $env["\155\171\163\x71\x6c"] = "\115\x79\x53\161\154\x20" . substr($mysql, 0, strpos($mysql, "\x2d")); goto dUB7l; CuvR3: $env["\x64\151\162\162\x6f\x6f\x74"] = getenv("\104\117\103\x55\x4d\105\x4e\x54\137\x52\x4f\117\x54"); goto TApT2; dUB7l: $php = phpversion(); goto yrqlC; yrqlC: $env["\160\150\160"] = "\120\110\x50\40" . substr($php, 0, strpos($php, "\x2d")); goto L0AFg; TApT2: $env["\141\x70\141\x63\150\145"] = apache_get_version(); goto mNudB; mNudB: $mysql = $this->db->query("\163\145\x6c\145\143\x74\x20\166\145\162\x73\x69\157\x6e\50\x29\73")->get(0); goto lb48F; L0AFg: $env["\165\160\154\157\x61\144"] = ini_get("\146\x69\x6c\x65\x5f\x75\160\154\157\141\x64\x73") ? ini_get("\x75\x70\x6c\157\141\144\x5f\x6d\141\x78\137\146\151\x6c\145\x73\151\x7a\x65") : "\104\151\x73\141\x62\154\145\x64"; goto N2Los; JV0EX: } }
