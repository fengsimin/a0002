<?php
//Copyright (c) 2016 iFeiwu.com
 class Item extends Ifeiwu { public function __construct() { goto O3zgK; O3zgK: if ($this->table) { goto Su1G_; } goto wwAUs; w7noy: Su1G_: goto LG7qn; LG7qn: parent::__construct(); goto RrYYQ; wwAUs: $this->table = "\x69\164\x65\155"; goto w7noy; RrYYQ: } protected function postPage($request_data) { goto cYHAw; QoSH0: $column = $request_data["\143\157\x6c\x75\x6d\156"] ?: "\x2a"; goto kO2oS; SNnLG: $data = $this->db->select($this->table, $column)->where($where)->order($order)->all(); goto Izej8; WU2wA: $data = array("\154\151\x73\164" => $list, "\x74\157\164\141\x6c" => $total, "\x70\x65\x72\160\x61\x67\145" => $perpage, "\x70\141\147\145" => $page); goto k1Tzf; ZdDPM: return $this->success($data); goto IPbF_; cYHAw: $this->_callback("\x63\x61\x6c\154\x62\x61\143\153\x50\x61\147\145\102\145\x66\x6f\x72\x65", array(&$request_data)); goto QoSH0; qUIPv: $list = $this->db->select($this->table, $column)->where($where)->order($order)->limit(array($page * $perpage, $perpage))->all(); goto WU2wA; p2kAp: $page = $page ? $page - 1 : 0; goto im_Je; dXMhf: if ($perpage > 0) { goto urgKD; } goto SNnLG; im_Je: $total = $this->db->select($this->table)->where($where)->count(); goto qUIPv; sdbVF: $this->_callback("\143\x61\154\x6c\142\x61\x63\x6b\120\141\147\145\101\x66\164\145\x72", array(&$data)); goto ZdDPM; lNxf6: $order = $request_data["\157\x72\x64\145\162"] ?: $this->order; goto ky7aM; ky7aM: $perpage = $request_data["\x70\x65\162\x70\x61\147\x65"] ?: 0; goto dXMhf; k1Tzf: pc0Q7: goto sdbVF; opV8V: $page = $request_data["\160\x61\147\x65"] ?: 1; goto p2kAp; nyZps: urgKD: goto opV8V; Izej8: goto pc0Q7; goto nyZps; kO2oS: $where = $request_data["\167\x68\x65\x72\145"] ?: "\61\40\x3d\x20\61"; goto lNxf6; IPbF_: } protected function postQuery($request_data) { goto lXllp; G3GLF: if (!(stripos($sql, "\44\x74\x61\142\x6c\x65") !== false)) { goto VFAg4; } goto LcriL; lXllp: $sql = $request_data["\163\161\x6c"]; goto G3GLF; pZc2I: return $this->db->query($sql, $request_data["\x76\x61\154\165\145\x73"])->all(); goto V0NqN; LcriL: $sql = str_replace("\x24\164\x61\x62\x6c\x65", $this->prefix . $this->table, $sql); goto Sr7bT; Sr7bT: VFAg4: goto pZc2I; V0NqN: } protected function getOne($id, $column = null) { goto YX3VV; YX3VV: $column = $column ?: "\x2a"; goto hlEpA; udeEi: return $this->success($data); goto p5PRb; hlEpA: $data = $this->db->select($this->table, $column)->where(array("\151\x64", "\75", $id))->get(); goto udeEi; p5PRb: } protected function postAdd($request_data) { goto D2gmW; UjSoS: $data["\x69\144"] = $id; goto RQkSe; RQkSe: $upload_path = $this->_bulidUploadPath($upload_path, $data); goto fPkqL; He22b: $udata["\154\145\x76\145\x6c"] = $this->_getLevel($pid, $id); goto ETCnn; DZ3eo: $pid = $data["\x70\151\x64"]; goto vahqh; QaaOY: $upload_name = $request_data["\x24\x75\160\154\x6f\x61\144\x5f\x6e\x61\155\x65"]; goto uVyKK; h6a0d: if ($this->db->update($this->table, $udata, array("\x69\144", "\x3d", $id))->is()) { goto fyWUY; } goto szgMi; yWrHV: return $this->error("\346\267\xbb\345\212\240\346\x95\xb0\346\x8d\256\xe5\244\xb1\xe8\264\xa5\357\xbc\201"); goto xuBz3; uVyKK: $upload_path = $request_data["\44\x75\x70\154\x6f\141\x64\137\x70\141\x74\x68"]; goto A9Yb0; MTqU6: goto uXvUn; goto WuoxE; pw53v: if ($id) { goto fUQN6; } goto yWrHV; szgMi: $this->db->rollBack(); goto vMSWf; vahqh: if (!($pid > 0 && in_array("\x6c\145\166\x65\x6c", $this->fields))) { goto m2gwk; } goto He22b; C3Eh2: $udata = array("\151\144" => $id); goto DZ3eo; K381v: return $this->success("\346\xb7\273\345\x8a\240\346\x95\260\346\215\256\xe6\x88\220\345\x8a\x9f\357\xbc\x81", array("\151\144" => $id, "\151\155\141\147\145\137\x70\x61\164\x68" => $upload_path)); goto rkYz1; o9OuH: $data = $this->_bulidData($request_data); goto IfZV9; BJuX9: $this->_removeFiles2($request_data["\x5f\x72\x65\155\x6f\x76\145\x66\151\x6c\145\163"]); goto o9OuH; xuBz3: fUQN6: goto C3Eh2; EODfN: $this->_log("\x61\x64\144", array("\164\x69\164\154\x65" => $data["\164\x69\164\x6c\x65"], "\x74\x61\x62\154\145\137\x69\144" => $id)); goto Ar8qp; uPSR7: $id = $this->db->insert($this->table, $data)->id(); goto pw53v; vMSWf: return $this->error("\346\xb7\273\345\212\240\346\x95\xb0\346\x8d\xae\xe5\244\xb1\xe8\264\245\357\274\201"); goto MTqU6; tW6ZI: HUcof: goto h6a0d; c0R6O: $this->_callback("\x63\141\x6c\x6c\142\x61\x63\x6b\101\144\144\101\146\x74\x65\x72", array($id, &$request_data)); goto EODfN; ETCnn: m2gwk: goto QaaOY; rkYz1: uXvUn: goto jBYjz; A9Yb0: if (!($upload_name && $upload_path)) { goto HUcof; } goto UjSoS; WuoxE: fyWUY: goto c0R6O; D2gmW: $this->_callback("\x63\141\x6c\x6c\142\141\143\x6b\101\144\x64\x42\x65\146\157\162\x65", array(&$request_data)); goto BJuX9; Ar8qp: $this->db->commit(); goto K381v; pGxyK: $this->db->beginTransaction(); goto uPSR7; fPkqL: $udata[$upload_name] = $upload_path; goto tW6ZI; IfZV9: $data["\143\164\x69\155\145"] = time(); goto pGxyK; jBYjz: } protected function postUpdate($id, $request_data) { goto yoQSQ; E_Z3Q: $upload_path = $request_data["\44\165\160\154\157\141\144\137\160\x61\164\x68"]; goto Zz82W; SrgMs: qSegO: goto AfRSq; wkBPb: return $this->error("\344\277\x9d\345\xad\x98\345\xa4\261\350\xb4\xa5\357\274\201"); goto WMz4C; ghcam: if (!($pid > 0 && in_array("\x6c\145\x76\x65\154", $this->fields))) { goto lm19R; } goto KdEQ2; NUW53: $data = $this->_bulidData($request_data); goto GWYhi; r1vvn: $pid = $data["\x70\x69\x64"]; goto ghcam; qTGfl: $this->_callback("\143\141\x6c\x6c\142\141\143\153\x55\x70\144\141\x74\145\x41\x66\164\145\162", array($id, &$request_data)); goto awrum; m89Ik: if (!in_array($upload_name, $this->fields)) { goto qSegO; } goto bRol9; MG90j: lm19R: goto RRVtk; RRVtk: $upload_name = $request_data["\x24\165\x70\154\157\141\144\x5f\x6e\141\x6d\145"]; goto E_Z3Q; awrum: $this->_log("\165\160\144\141\x74\x65", array("\x74\x69\164\154\145" => $data["\164\x69\x74\x6c\x65"])); goto YPa2I; bRol9: $data[$upload_name] = $upload_path; goto SrgMs; KdEQ2: $data["\154\x65\166\x65\x6c"] = $this->_getLevel($pid, $id); goto MG90j; Zz82W: if (!($upload_name && $upload_path)) { goto Vb9R3; } goto kEdWa; AfRSq: Vb9R3: goto mbGeY; R3yK9: $this->_removeFiles2($request_data["\x5f\162\145\155\157\x76\x65\146\x69\154\x65\x73"]); goto NUW53; yoQSQ: $this->_callback("\143\x61\x6c\154\142\x61\143\153\x55\x70\x64\141\164\145\102\145\x66\157\x72\x65", array(&$request_data)); goto R3yK9; GWYhi: $data["\x75\164\151\155\x65"] = time(); goto r1vvn; YPa2I: return $this->success("\345\xb7\262\344\277\x9d\xe5\xad\230\346\x9b\264\xe6\224\xb9\357\xbc\x81"); goto fPWHj; WMz4C: goto M6s_u; goto AwWI3; fPWHj: M6s_u: goto CKZc4; kEdWa: $upload_path = $this->_bulidUploadPath($upload_path, $data); goto m89Ik; mbGeY: if ($this->db->update($this->table, $data, array("\151\144", "\x3d", $id))->is()) { goto e_ed9; } goto wkBPb; AwWI3: e_ed9: goto qTGfl; CKZc4: } protected function postField($request_data) { goto v81wf; v6KR9: $name = $request_data["\x6e\x61\x6d\145"]; goto qNH_4; scZFb: U4Bv0: goto SsEEV; HNPiQ: return $this->error(); goto gm3r_; qNH_4: $value = $request_data["\166\141\154\x75\x65"]; goto SWRs0; SWRs0: if ($this->db->update($this->table, array($name => $value), array("\151\x64", "\x49\x4e", $ids))->is()) { goto Lcv6z; } goto HNPiQ; gm3r_: goto U4Bv0; goto sU_11; sU_11: Lcv6z: goto hxgd8; v81wf: $ids = $request_data["\x69\144"]; goto v6KR9; hxgd8: return $this->success(); goto scZFb; SsEEV: } protected function postCount($request_data) { goto iwzyc; oQ0sB: $where = $request_data["\x77\x68\x65\x72\145"] ?: "\61\40\75\x20\61"; goto G97kG; G97kG: return $this->db->select($table)->where($where)->count(); goto XIfKI; iwzyc: $table = $request_data["\x74\141\142\x6c\x65"] ?: $this->table; goto oQ0sB; XIfKI: } protected function postDelete($request_data) { goto BmSGr; BmSGr: $this->_callback("\143\x61\x6c\x6c\142\x61\x63\x6b\x44\145\x6c\x65\164\145\102\x65\146\x6f\x72\x65", array(&$request_data)); goto Qrfrg; Gb4vl: goto ySBXn; goto DOkHm; z2W0J: $this->_callback("\x63\x61\154\154\x62\141\x63\153\104\145\154\145\164\x65\101\146\x74\x65\162", array(&$request_data)); goto j1eeC; RwiWI: NRVST: goto Rkjbo; ssh22: $this->db->rollBack(); goto YxVtY; hWZYY: $ids = $request_data["\151\144"]; goto jPx68; yHeuq: foreach ($ids as $id) { goto wKJbb; UKV_X: goto g9dQH; goto ml4bT; BsWQN: TTElb: goto zULeg; QxE8z: if ($this->db->delete($this->table, array("\x69\144", "\75", $id))->is()) { goto m4UF2; } goto S8Xs4; zULeg: g9dQH: goto j2KLF; S8Xs4: $error[] = $id; goto UKV_X; GAVnm: $this->_trash($item, $request_data); goto BsWQN; P2IVt: m4UF2: goto GAVnm; wKJbb: $item = $this->db->select($this->table)->where(array("\x69\x64", "\75", $id))->get(); goto QxE8z; ml4bT: goto TTElb; goto P2IVt; j2KLF: } goto RwiWI; Qrfrg: $error = array(); goto hWZYY; Rkjbo: if (count($error) === 0) { goto vhVSJ; } goto ssh22; bfbyW: $this->_log("\x72\x65\155\x6f\166\x65", array("\164\151\164\x6c\145" => count($ids))); goto YNMuX; j1eeC: $this->db->commit(); goto bfbyW; jPx68: $this->db->beginTransaction(); goto yHeuq; JYVjy: ySBXn: goto h3sdb; YxVtY: return $this->error("\xe6\x9c\x89\40" . count($error) . "\346\235\xa1\xe6\x95\260\xe6\215\xae\345\x88\xa0\xe9\x99\244\345\244\261\xe8\264\245\xef\274\x81"); goto Gb4vl; DOkHm: vhVSJ: goto z2W0J; YNMuX: return $this->success(); goto JYVjy; h3sdb: } }
